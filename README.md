# Country Data Finder
#### Video Demo:  https://youtu.be/w1Fsnp2ZU0M
#### Description: Finds country data using the Countries REST API
##### How it works: The code for this website is composed of JavaScript, CSS, and HTML. The JavaScript code consists of three functions. The first function is called get country data. It uses a promise chain to asynchronously call the API, parse data, and then store that data into an object. This process is split into two phases. The first phase is a setup and asynchronous phase. For some contextual knowledge, then blocks have two main properties. They only run once previous promises within the promise chain are fulfilled, and they create a promise when they are called that will settle when its callback function inside its parameter is resolved.

##### Starting from the top of the first function, fetch calls the API and immediately returns a promise, which I'll call promise A for easier understanding. Promise A from fetch is resolved, and the response object is passed as a parameter into the function inside the then block to run. This function checks if response.ok returns false if the HTTP status code of the response is not in the range 200-299 (inclusive), indicating an unsuccessful response. If an unsuccessful response occurs, I throw a new error, which will take the code off the success path, and the catch block will be activated when I run the function (I have implemented this error checking later in my code). However, if the response object has a valid HTTP status code, then I will use the .json() method on the response to format the response coming from the API. This method also returns a promise, which I will refer to as promise B. When promise B from the .json() method is resolved, due to the nature of then blocks, the return value of the previous then block will be passed in as a parameter to the function of the subsequent then block. The then block chained after it creates promise C. Inside this then block, the inside the block changes the value of the empty all_country_data object and replaces it with the JSON formatted data coming from the API. This allows me to locally search this object rather than having to call the API every time. Finally, when promise C is resolved, the return statement behind the fetch will send the new all_country_data outside, so then blocks chained to getCountryData() will be able to access the parsed JSON all_country_data object.

##### My second function, called search_country, performs a double pass across all_country_data to check if full matches between user input and a country in the database occur or if partial matches occur. This double pass method prioritises full matches. This function works by first sanitising the user's search term and then using a for loop to loop through each country. If a full match occurs, then the function will return the country that matched the user's input. If no full match was found, then the function will run the loop again to check for partial matches. If no matches were found, null will be returned.

##### In the main part of my code, I add an event listener to the document object to check if the DOM has loaded. Once it's loaded, I proceed with storing each of my HTML elements in constants for easier access. I then run getCountryData, and I attach a then statement if the API data pull is successful. Inside this then block I add an event listener to the button and run the search_country function to find the country the user has searched for. I then run a conditional. If matches are found, ie. country_data is not null, then I change the innerHTML of the result block to display the country info. Otherwise, if no matches are found, I show an error message telling them the user input was invalid. My catch block will also return an error if there was an issue pulling data from the API. I learned about promises and how they work through this video : https://www.youtube.com/watch?v=TnhCX0KkPqs

##### My HTML is quite simple. Just the boilerplate and then some divs to cut up my page. I added IDs to each tag I wanted to style so I could make the page look good with CSS. I wanted to go for a retro-ish style, so I chose the courier font family in style.css. I also found a fun box shadow for my results box from this website : https://getcssscan.com/css-box-shadow-examples.

#### Hope you enjoy my code! 
